<div class="header">
     <div class="board-details-title">
            {{ board()?.title }}
        </div>
    <div class="butons">
        <div class="custom-button" (click)="handleCreateTask()">Додати завдання</div>
        <div class="custom-button" (click)="switchActive()">---</div>
        <div class="board-details" [class.active]="isActive">
           
            <div class="board-details-body">
                <div class="board-info">
                    <span>
                        Дошку створив: {{ board()?.owner?.metadata?.username }}
                    </span>
                    <span>
                        {{ board()?.owner?.email }}
                    </span>
                    <div class="board-header">
                        Дошку створено: {{ board()?.created_at | date }}
                    </div>
                </div>
    <br>
                <div class="members">
                    <div class="members-title">Учасники:</div>
                    <div class="members-list">
                        <span class="member">{{ board()?.owner?.metadata?.username }}</span><span>, </span>
                        @for (member of board()?.members; track member.id) {
                            <span class="member">{{ member.metadata.username }}</span><span>, </span>
                        }
                    </div>
    <br>
                    <div class="add-members">
                        Додати учасника
                        <div class="member-select">
                            <div class="control">
                                <label for="member-select">Введіть електрону пошту користувача якого бажаєте додати:</label>
                                <input #memberEmail name="member" id="member-select">
                            </div>
                            <div>
                                <input class="form-button" type="submit" value="Додати користувача" (click)="addUserToBoard(memberEmail.value)">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
        </div>
    </div>
</div>
<div class="blocks-container">
    @if (isLoading()) {
        Loading...
    } @else {
        <div class="todo-list todo-status">
            <div class="todo-list-title">To Do</div>
            @if (toDoStatusTasks().length) {
                @for (todo of toDoStatusTasks(); track todo.id) {
                    <app-todo-item [todo]="todo" [members]="membersWithOwner()" (todoChanged)="reloadTodos()"></app-todo-item>
                }
            } @else {
                No tasks found.
            }
        </div>
        <div class="todo-list inprogress-status">
            <div class="todo-list-title">In Progress</div>
            @if (inProgressStatusTasks().length) {
                @for (todo of inProgressStatusTasks(); track todo.id) {
                    <app-todo-item [todo]="todo" [members]="membersWithOwner()" (todoChanged)="reloadTodos()"></app-todo-item>
                }
            } @else {
                No tasks found.
            }
        </div>
        <div class="todo-list done-status">
            <div class="todo-list-title">Done</div>
            @if (doneStatusTasks().length) {
                @for (todo of doneStatusTasks(); track todo.id) {
                    <app-todo-item [todo]="todo" [members]="membersWithOwner()" (todoChanged)="reloadTodos()"></app-todo-item>
                }
            } @else {
                No tasks found.
            }
        </div>  
    }
</div>
